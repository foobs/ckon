<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ckon by tschaume</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>ckon</h1>
        <p>automatic compiler &amp; linker for ROOT analyses</p>

        <p class="view"><a href="https://github.com/tschaume/ckon">View the Project on GitHub <small>tschaume/ckon</small></a></p>


        <ul>
          <li><a href="https://github.com/tschaume/ckon/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/tschaume/ckon/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/tschaume/ckon">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><em>ckon</em> is a C++ program/tool which automatically takes care of
compilation, dictionary generation and linking of programs and libraries
developed for data analyses within the <a href="http://root.cern.ch">CERN ROOT analysis
framework</a>. This includes parsing include headers to
figure out which libraries the main programs need to be linked to. It uses
<a href="http://www.gnu.org/software/autoconf/">automake/autoconf</a> to be platform
independent and GNU install compliant.</p>

<h3>Get the Code &amp; Install</h3>

<ul>
<li>clone <em>ckon</em> via <code>git clone git@github.com:tschaume/ckon.git</code>
</li>
<li>install via <code>cd ckon; ./installCkon &lt;install-path&gt;</code><br>
(replace <code>&lt;install-path&gt;</code> with an install path in your $PATH)<br>
(see <code>./installCkon -h</code> for help)</li>
<li>see <code>./configure --help</code> for configure options in case something goes
wrong</li>
</ul><h3>Usage</h3>

<h4>Generic Options</h4>

<p>Shown below are the generic command line options which can be given to <em>ckon</em>.</p>

<pre><code>Generic Options:
  -h [ --help ]         show this help
  -v [ --verbose ]      verbose output
  -j arg                call make w/ -j &lt;#cores&gt;
  --ckon_cmd arg        setup | clean | install
</code></pre>

<p>The long option <code>--ckon_cmd</code> is implemented as optional positional option
to run the setup, clean all compilation products (i.e. <code>make clean</code>) and
globally install libraries and programs (i.e. <code>make install</code>):</p>

<ul>
<li>
<code>ckon setup</code>: run the setup</li>
<li>
<code>ckon</code>: compile</li>
<li>
<code>ckon clean</code>: make clean</li>
<li>
<code>ckon install</code>: make install</li>
</ul><h4>Setup</h4>

<p><code>ckon setup</code> generates the files <em>configure.ac</em> and <em>.autom4te.cfg</em> (both
autoconf specific, no need for modifications) as well as <em>ckon.cfg</em>. Modify
the latter to resemble your directory structure and linker options. Simply
remove the lines/options you don't need, thus using the default options.</p>

<h4>Configuration</h4>

<p>The following options can be set on the command line or preferably in
<em>ckon.cfg</em>. Optionally, a file named <code>ckonignore</code> with a list of strings to
be ignored during the build process, can be created in the working directory.
Wildcards are not supported (yet). Instead each path currently processed by
<em>ckon</em> will be checked against the strings/lines in <code>ckonignore</code>. If one of
the strings in <code>ckonignore</code> is contained in the path, the path is
ignored/skipped.</p>

<pre><code>Configuration:
  -s [ --suffix ] arg    add suffix + in LinkDef.h (bool)
  -b [ --boost ] arg     include BOOST_INC/BOOST_LIB (bool)
  --ckon.src_dir arg     source dir
  --ckon.exclSuffix arg  no + suffix
  --ckon.NoRootCint arg  no dictionary
  --ckon.prog_subdir arg progs subdir
  --ckon.build_dir arg   build dir
  --ckon.install_dir arg install dir
  --ckon.cppflags arg    add CPPFLAGS

In addition, unregistered options of the form
ldadd.prog_name are allowed to use for adding
LDFLAGS to the linker of specific programs. The
given string/value is added verbatim in LDADD.
Unregistered options are only allowed in ckon.cfg
</code></pre>

<p>The unregistered option group <code>ldadd</code> is allowed. For instance, link the
programs <em>genCharmContrib</em> and <em>dedxCut</em> versus
<a href="http://home.thep.lu.se/%7Etorbjorn/Pythia.html">Pythia6</a> and
<a href="http://root.cern.ch/drupal/content/roofit">RooFit</a>, respectively, by adding the
following to <em>ckon.cfg</em>.</p>

<pre><code>[ldadd]
genCharmContrib=-lPhysics -lEG -lEGPythia6  # link pythia
dedxCut=-lRooFit -lRooFitCore -lMinuit      # link roofit
</code></pre>

<p>IMPORTANT note for include directives: For the recursive header scan to work,
make sure that all C++ and ROOT headers are enclosed in <code>&lt;...&gt;</code>! Only your
local/private headers should be enclosed in <code>"..."</code>. Otherwise <em>ckon</em> will
fail reporting a <code>basic_string::_S_create</code> error.</p>

<h4>Typical Directory Structure</h4>

<p>Put header and source files for each library into a separate folder in
<code>ckon.src_dir</code>.  Running <em>ckon</em> should automagically take the right action
for the current status of your build directory (no need to run <code>ckon clean</code>
before re-compilation). Makefiles and LinkDef’s are generated automatically
based on the contents and timestamps in the ckon.src_dir directory.</p>

<p>A typical directory structure could look as follows - using the current
defaults for illustration purposes:</p>

<pre><code>StRoot
├── ElectronPid
│   ├── BetaPanels.cxx
│   ├── BetaPanels.h
│   ├── PureSampleAnalysis.cxx
│   ├── PureSampleAnalysis.h
│   ├── SigmaElFitsMaker.cxx
│   ├── SigmaElFitsMaker.h
│   ├── SigmaElFitsPlotter.cxx
│   ├── SigmaElFitsPlotter.h
│   ├── SigmaElFitsUtils.cxx
│   ├── SigmaElFitsUtils.h
│   └── programs
│       ├── README
│       ├── beta3sig.cc
│       ├── dedxCut.cc
│       ├── nsigparamsGP.cc
│       └── pureSamp.cc
├── StBadRdosDb
│   ├── StBadRdosDb.cxx
│   ├── StBadRdosDb.h
│   ├── database
│   │   ├── dbfiles
│   │   ├── genAll.sh
│   │   └── genBadRdosDb.pl
│   └── macros
│       └── testStBadRdosDb.C
├── YamlCfgReader
│   ├── YamlCfgReader.cxx
│   ├── YamlCfgReader.h
│   └── config.yml
...
</code></pre>

<h3>Reference Talk about Automake/Autoconf Setup</h3>

<p>Talk at Junior's Day of STAR Collaboration Meeting (LBNL, 2011/11/14)<br><a href="https://speakerdeck.com/tschaume/organize-root-analyses-with-autoconf">https://speakerdeck.com/tschaume/organize-root-analyses-with-autoconf</a></p>

<h3>Software Requirements</h3>

<p>The following software and corresponding versions should be installed on your
system:</p>

<ul>
<li>m4/1.4.6</li>
<li>autoconf/2.68</li>
<li>automake/1.11.4</li>
<li>libtool/2.4</li>
<li>boost/1.50</li>
</ul><h3>License &amp; Project Homepage</h3>

<p><em>ckon</em> is published under MIT License (<a href="http://opensource.org/licenses/MIT">http://opensource.org/licenses/MIT</a>).<br>
Find the project page at <a href="http://tschaume.github.com/ckon">http://tschaume.github.com/ckon</a></p>

<h3>Authors and Contributors</h3>

<p>Patrick Huck (<a href="https://github.com/tschaume" class="user-mention">@tschaume</a>)<br><em>invaluable contributions</em>: Hiroshi Masui</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/tschaume">tschaume</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>